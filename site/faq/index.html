
<!doctype html>
<html lang="en" class="no-js">
  <head>

      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">

        <meta name="description" content="Uniform Manifold Approximation and Projection">


        <meta name="author" content="Leland McInnes">


        <link rel="canonical" href="https://lmcinnes.github.io/umap/faq/">


        <link rel="prev" href="../api/">


        <link rel="next" href="../scientific_papers/">


      <link rel="icon" href="../doc/logo_large.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.5.46">



        <title>FAQ - UMAP</title>



      <link rel="stylesheet" href="../assets/stylesheets/main.6f8fc17f.min.css">


        <link rel="stylesheet" href="../assets/stylesheets/palette.06af60db.min.css">












        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>



    <script>__md_scope=new URL("..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>






  </head>









    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="indigo">


    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">


        <a href="#frequently-asked-questions" class="md-skip">
          Skip to content
        </a>

    </div>
    <div data-md-component="announce">

    </div>






<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href=".." title="UMAP" class="md-header__button md-logo" aria-label="UMAP" data-md-component="logo">

  <img src="../doc/logo_large.png" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">

      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            UMAP
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">

              FAQ

          </span>
        </div>
      </div>
    </div>


        <form class="md-header__option" data-md-component="palette">




    <input class="md-option" data-md-color-media="" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="indigo"  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_0">

      <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_1" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a4 4 0 0 0-4 4 4 4 0 0 0 4 4 4 4 0 0 0 4-4 4 4 0 0 0-4-4m0 10a6 6 0 0 1-6-6 6 6 0 0 1 6-6 6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"/></svg>
      </label>





    <input class="md-option" data-md-color-media="" data-md-color-scheme="slate" data-md-color-primary="indigo" data-md-color-accent="indigo"  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_1">

      <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_0" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 18c-.89 0-1.74-.2-2.5-.55C11.56 16.5 13 14.42 13 12s-1.44-4.5-3.5-5.45C10.26 6.2 11.11 6 12 6a6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"/></svg>
      </label>


</form>



      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>



      <label class="md-header__button md-icon" for="__search">

        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">

        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>

        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">

        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">

          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>

        <div class="md-search__suggest" data-md-component="search-suggest"></div>

    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>


      <div class="md-header__source">
        <a href="https://github.com/lmcinnes/umap" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">

    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.7.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81"/></svg>
  </div>
  <div class="md-source__repository">
    lmcinnes/umap
  </div>
</a>
      </div>

  </nav>

</header>

    <div class="md-container" data-md-component="container">






      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">



              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">




<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href=".." title="UMAP" class="md-nav__button md-logo" aria-label="UMAP" data-md-component="logo">

  <img src="../doc/logo_large.png" alt="logo">

    </a>
    UMAP
  </label>

    <div class="md-nav__source">
      <a href="https://github.com/lmcinnes/umap" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">

    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.7.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81"/></svg>
  </div>
  <div class="md-source__repository">
    lmcinnes/umap
  </div>
</a>
    </div>

  <ul class="md-nav__list" data-md-scrollfix>







    <li class="md-nav__item">
      <a href=".." class="md-nav__link">


  <span class="md-ellipsis">
    Home
  </span>


      </a>
    </li>













    <li class="md-nav__item md-nav__item--nested">





        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_2" >


          <label class="md-nav__link" for="__nav_2" id="__nav_2_label" tabindex="0">


  <span class="md-ellipsis">
    Getting Started
  </span>


            <span class="md-nav__icon md-icon"></span>
          </label>

        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2">
            <span class="md-nav__icon md-icon"></span>
            Getting Started
          </label>
          <ul class="md-nav__list" data-md-scrollfix>







    <li class="md-nav__item">
      <a href="../basic_usage/" class="md-nav__link">


  <span class="md-ellipsis">
    Installation
  </span>


      </a>
    </li>










    <li class="md-nav__item">
      <a href="../how_umap_works/" class="md-nav__link">


  <span class="md-ellipsis">
    How UMAP Works
  </span>


      </a>
    </li>










    <li class="md-nav__item">
      <a href="../reproducibility/" class="md-nav__link">


  <span class="md-ellipsis">
    Reproducibility
  </span>


      </a>
    </li>




          </ul>
        </nav>

    </li>













    <li class="md-nav__item md-nav__item--nested">





        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_3" >


          <label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="0">


  <span class="md-ellipsis">
    User Guide
  </span>


            <span class="md-nav__icon md-icon"></span>
          </label>

        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            User Guide
          </label>
          <ul class="md-nav__list" data-md-scrollfix>







    <li class="md-nav__item">
      <a href="../basic_usage/" class="md-nav__link">


  <span class="md-ellipsis">
    Installation
  </span>


      </a>
    </li>










    <li class="md-nav__item">
      <a href="../parameters/" class="md-nav__link">


  <span class="md-ellipsis">
    Parameters
  </span>


      </a>
    </li>










    <li class="md-nav__item">
      <a href="../supervised/" class="md-nav__link">


  <span class="md-ellipsis">
    Supervised Dimensionality Reduction
  </span>


      </a>
    </li>










    <li class="md-nav__item">
      <a href="../clustering/" class="md-nav__link">


  <span class="md-ellipsis">
    Clustering
  </span>


      </a>
    </li>










    <li class="md-nav__item">
      <a href="../inverse_transform/" class="md-nav__link">


  <span class="md-ellipsis">
    Inverse Transform
  </span>


      </a>
    </li>










    <li class="md-nav__item">
      <a href="../sparse/" class="md-nav__link">


  <span class="md-ellipsis">
    Sparse Data
  </span>


      </a>
    </li>




          </ul>
        </nav>

    </li>













    <li class="md-nav__item md-nav__item--nested">





        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_4" >


          <label class="md-nav__link" for="__nav_4" id="__nav_4_label" tabindex="0">


  <span class="md-ellipsis">
    Advanced Topics
  </span>


            <span class="md-nav__icon md-icon"></span>
          </label>

        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4">
            <span class="md-nav__icon md-icon"></span>
            Advanced Topics
          </label>
          <ul class="md-nav__list" data-md-scrollfix>







    <li class="md-nav__item">
      <a href="../composing_models/" class="md-nav__link">


  <span class="md-ellipsis">
    Composing Models
  </span>


      </a>
    </li>










    <li class="md-nav__item">
      <a href="../aligned_umap_basic_usage/" class="md-nav__link">


  <span class="md-ellipsis">
    Aligned UMAP
  </span>


      </a>
    </li>










    <li class="md-nav__item">
      <a href="../aligned_umap_politics_demo/" class="md-nav__link">


  <span class="md-ellipsis">
    Aligned UMAP - Politics Demo
  </span>


      </a>
    </li>










    <li class="md-nav__item">
      <a href="../embedding_space/" class="md-nav__link">


  <span class="md-ellipsis">
    Embedding Space
  </span>


      </a>
    </li>










    <li class="md-nav__item">
      <a href="../exploratory_analysis/" class="md-nav__link">


  <span class="md-ellipsis">
    Exploratory Analysis
  </span>


      </a>
    </li>




          </ul>
        </nav>

    </li>













    <li class="md-nav__item md-nav__item--nested">





        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_5" >


          <label class="md-nav__link" for="__nav_5" id="__nav_5_label" tabindex="0">


  <span class="md-ellipsis">
    Variants and Extensions
  </span>


            <span class="md-nav__icon md-icon"></span>
          </label>

        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5">
            <span class="md-nav__icon md-icon"></span>
            Variants and Extensions
          </label>
          <ul class="md-nav__list" data-md-scrollfix>







    <li class="md-nav__item">
      <a href="../densmap_demo/" class="md-nav__link">


  <span class="md-ellipsis">
    densMAP
  </span>


      </a>
    </li>










    <li class="md-nav__item">
      <a href="../parametric_umap/" class="md-nav__link">


  <span class="md-ellipsis">
    Parametric UMAP
  </span>


      </a>
    </li>










    <li class="md-nav__item">
      <a href="../mutual_nn_umap/" class="md-nav__link">


  <span class="md-ellipsis">
    Mutual Nearest Neighbors UMAP
  </span>


      </a>
    </li>










    <li class="md-nav__item">
      <a href="../transform/" class="md-nav__link">


  <span class="md-ellipsis">
    Transform & Inference
  </span>


      </a>
    </li>










    <li class="md-nav__item">
      <a href="../transform_landmarked_pumap/" class="md-nav__link">


  <span class="md-ellipsis">
    Landmarked Parametric UMAP
  </span>


      </a>
    </li>




          </ul>
        </nav>

    </li>













    <li class="md-nav__item md-nav__item--nested">





        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_6" >


          <label class="md-nav__link" for="__nav_6" id="__nav_6_label" tabindex="0">


  <span class="md-ellipsis">
    Visualization and Interactive
  </span>


            <span class="md-nav__icon md-icon"></span>
          </label>

        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_6_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_6">
            <span class="md-nav__icon md-icon"></span>
            Visualization and Interactive
          </label>
          <ul class="md-nav__list" data-md-scrollfix>







    <li class="md-nav__item">
      <a href="../plotting/" class="md-nav__link">


  <span class="md-ellipsis">
    Plotting
  </span>


      </a>
    </li>










    <li class="md-nav__item">
      <a href="../interactive_viz/" class="md-nav__link">


  <span class="md-ellipsis">
    Interactive Visualization
  </span>


      </a>
    </li>










    <li class="md-nav__item">
      <a href="../outliers/" class="md-nav__link">


  <span class="md-ellipsis">
    Outlier Detection
  </span>


      </a>
    </li>










    <li class="md-nav__item">
      <a href="../document_embedding/" class="md-nav__link">


  <span class="md-ellipsis">
    Document Embedding
  </span>


      </a>
    </li>










    <li class="md-nav__item">
      <a href="../nomic_atlas_umap_of_text_embeddings/" class="md-nav__link">


  <span class="md-ellipsis">
    Nomic Atlas - Text Embeddings
  </span>


      </a>
    </li>










    <li class="md-nav__item">
      <a href="../nomic_atlas_visualizing_mnist_training_dynamics/" class="md-nav__link">


  <span class="md-ellipsis">
    Nomic Atlas - MNIST Training
  </span>


      </a>
    </li>




          </ul>
        </nav>

    </li>













    <li class="md-nav__item md-nav__item--nested">





        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_7" >


          <label class="md-nav__link" for="__nav_7" id="__nav_7_label" tabindex="0">


  <span class="md-ellipsis">
    Performance & Optimization
  </span>


            <span class="md-nav__icon md-icon"></span>
          </label>

        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_7_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_7">
            <span class="md-nav__icon md-icon"></span>
            Performance & Optimization
          </label>
          <ul class="md-nav__list" data-md-scrollfix>







    <li class="md-nav__item">
      <a href="../performance/" class="md-nav__link">


  <span class="md-ellipsis">
    Performance
  </span>


      </a>
    </li>










    <li class="md-nav__item">
      <a href="../benchmarking/" class="md-nav__link">


  <span class="md-ellipsis">
    Benchmarking
  </span>


      </a>
    </li>










    <li class="md-nav__item">
      <a href="../precomputed_k-nn/" class="md-nav__link">


  <span class="md-ellipsis">
    Precomputed k-NN
  </span>


      </a>
    </li>




          </ul>
        </nav>

    </li>















    <li class="md-nav__item md-nav__item--active md-nav__item--nested">



        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_8" checked>


          <label class="md-nav__link" for="__nav_8" id="__nav_8_label" tabindex="0">


  <span class="md-ellipsis">
    Reference & Support
  </span>


            <span class="md-nav__icon md-icon"></span>
          </label>

        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_8_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_8">
            <span class="md-nav__icon md-icon"></span>
            Reference & Support
          </label>
          <ul class="md-nav__list" data-md-scrollfix>







    <li class="md-nav__item">
      <a href="../api/" class="md-nav__link">


  <span class="md-ellipsis">
    API Reference
  </span>


      </a>
    </li>












    <li class="md-nav__item md-nav__item--active">

      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">





        <label class="md-nav__link md-nav__link--active" for="__toc">


  <span class="md-ellipsis">
    FAQ
  </span>


          <span class="md-nav__icon md-icon"></span>
        </label>

      <a href="./" class="md-nav__link md-nav__link--active">


  <span class="md-ellipsis">
    FAQ
  </span>


      </a>



<nav class="md-nav md-nav--secondary" aria-label="Table of contents">






    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>

        <li class="md-nav__item">
  <a href="#should-i-normalise-my-features" class="md-nav__link">
    <span class="md-ellipsis">
      Should I normalise my features?
    </span>
  </a>

</li>

        <li class="md-nav__item">
  <a href="#can-i-cluster-the-results-of-umap" class="md-nav__link">
    <span class="md-ellipsis">
      Can I cluster the results of UMAP?
    </span>
  </a>

</li>

        <li class="md-nav__item">
  <a href="#the-clusters-are-all-squashed-together-and-i-cant-see-internal-structure" class="md-nav__link">
    <span class="md-ellipsis">
      The clusters are all squashed together and I can't see internal structure
    </span>
  </a>

</li>

        <li class="md-nav__item">
  <a href="#i-ran-out-of-memory-help" class="md-nav__link">
    <span class="md-ellipsis">
      I ran out of memory. Help!
    </span>
  </a>

</li>

        <li class="md-nav__item">
  <a href="#umap-is-eating-all-my-cores-help" class="md-nav__link">
    <span class="md-ellipsis">
      UMAP is eating all my cores. Help!
    </span>
  </a>

</li>

        <li class="md-nav__item">
  <a href="#is-there-gpu-or-multicore-cpu-support" class="md-nav__link">
    <span class="md-ellipsis">
      Is there GPU or multicore-CPU support?
    </span>
  </a>

</li>

        <li class="md-nav__item">
  <a href="#can-i-add-a-custom-loss-function" class="md-nav__link">
    <span class="md-ellipsis">
      Can I add a custom loss function?
    </span>
  </a>

</li>

        <li class="md-nav__item">
  <a href="#is-there-support-for-the-r-language" class="md-nav__link">
    <span class="md-ellipsis">
      Is there support for the R language?
    </span>
  </a>

</li>

        <li class="md-nav__item">
  <a href="#is-there-a-cc-implementation" class="md-nav__link">
    <span class="md-ellipsis">
      Is there a C/C++ implementation?
    </span>
  </a>

</li>

        <li class="md-nav__item">
  <a href="#i-cant-get-umap-to-run-properly" class="md-nav__link">
    <span class="md-ellipsis">
      I can't get UMAP to run properly!
    </span>
  </a>

</li>

        <li class="md-nav__item">
  <a href="#what-is-the-difference-between-pca-umap-vaes" class="md-nav__link">
    <span class="md-ellipsis">
      What is the difference between PCA / UMAP / VAEs?
    </span>
  </a>

</li>

        <li class="md-nav__item">
  <a href="#how-umap-can-go-wrong" class="md-nav__link">
    <span class="md-ellipsis">
      How UMAP can go wrong
    </span>
  </a>

</li>

        <li class="md-nav__item">
  <a href="#successful-use-cases" class="md-nav__link">
    <span class="md-ellipsis">
      Successful use-cases
    </span>
  </a>

</li>

    </ul>

</nav>

    </li>










    <li class="md-nav__item">
      <a href="../scientific_papers/" class="md-nav__link">


  <span class="md-ellipsis">
    Scientific Papers
  </span>


      </a>
    </li>










    <li class="md-nav__item">
      <a href="../release_notes/" class="md-nav__link">


  <span class="md-ellipsis">
    Release Notes
  </span>


      </a>
    </li>










    <li class="md-nav__item">
      <a href="../development_roadmap/" class="md-nav__link">


  <span class="md-ellipsis">
    Development Roadmap
  </span>


      </a>
    </li>




          </ul>
        </nav>

    </li>



  </ul>
</nav>
                  </div>
                </div>
              </div>



              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">


<nav class="md-nav md-nav--secondary" aria-label="Table of contents">






    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>

        <li class="md-nav__item">
  <a href="#should-i-normalise-my-features" class="md-nav__link">
    <span class="md-ellipsis">
      Should I normalise my features?
    </span>
  </a>

</li>

        <li class="md-nav__item">
  <a href="#can-i-cluster-the-results-of-umap" class="md-nav__link">
    <span class="md-ellipsis">
      Can I cluster the results of UMAP?
    </span>
  </a>

</li>

        <li class="md-nav__item">
  <a href="#the-clusters-are-all-squashed-together-and-i-cant-see-internal-structure" class="md-nav__link">
    <span class="md-ellipsis">
      The clusters are all squashed together and I can't see internal structure
    </span>
  </a>

</li>

        <li class="md-nav__item">
  <a href="#i-ran-out-of-memory-help" class="md-nav__link">
    <span class="md-ellipsis">
      I ran out of memory. Help!
    </span>
  </a>

</li>

        <li class="md-nav__item">
  <a href="#umap-is-eating-all-my-cores-help" class="md-nav__link">
    <span class="md-ellipsis">
      UMAP is eating all my cores. Help!
    </span>
  </a>

</li>

        <li class="md-nav__item">
  <a href="#is-there-gpu-or-multicore-cpu-support" class="md-nav__link">
    <span class="md-ellipsis">
      Is there GPU or multicore-CPU support?
    </span>
  </a>

</li>

        <li class="md-nav__item">
  <a href="#can-i-add-a-custom-loss-function" class="md-nav__link">
    <span class="md-ellipsis">
      Can I add a custom loss function?
    </span>
  </a>

</li>

        <li class="md-nav__item">
  <a href="#is-there-support-for-the-r-language" class="md-nav__link">
    <span class="md-ellipsis">
      Is there support for the R language?
    </span>
  </a>

</li>

        <li class="md-nav__item">
  <a href="#is-there-a-cc-implementation" class="md-nav__link">
    <span class="md-ellipsis">
      Is there a C/C++ implementation?
    </span>
  </a>

</li>

        <li class="md-nav__item">
  <a href="#i-cant-get-umap-to-run-properly" class="md-nav__link">
    <span class="md-ellipsis">
      I can't get UMAP to run properly!
    </span>
  </a>

</li>

        <li class="md-nav__item">
  <a href="#what-is-the-difference-between-pca-umap-vaes" class="md-nav__link">
    <span class="md-ellipsis">
      What is the difference between PCA / UMAP / VAEs?
    </span>
  </a>

</li>

        <li class="md-nav__item">
  <a href="#how-umap-can-go-wrong" class="md-nav__link">
    <span class="md-ellipsis">
      How UMAP can go wrong
    </span>
  </a>

</li>

        <li class="md-nav__item">
  <a href="#successful-use-cases" class="md-nav__link">
    <span class="md-ellipsis">
      Successful use-cases
    </span>
  </a>

</li>

    </ul>

</nav>
                  </div>
                </div>
              </div>



            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">







<h1 id="frequently-asked-questions">Frequently Asked Questions<a class="headerlink" href="#frequently-asked-questions" title="Permanent link">&para;</a></h1>
<p>Compiled here are a set of frequently asked questions,
along with answers. If you don't find your question listed here
then please feel free to add an
<a href="https://github.com/lmcinnes/umap/issues/new">issue on github</a>.
More questions are always welcome, and the authors will do
their best to answer. If you feel you have a common question
that isn't answered here then please suggest that the question
(and answer) be added to the FAQ when you file the issue.</p>
<h2 id="should-i-normalise-my-features">Should I normalise my features?<a class="headerlink" href="#should-i-normalise-my-features" title="Permanent link">&para;</a></h2>
<p>The default answer is yes, but, of course, the real answer is
"it depends". If your features have meaningful relationships
with one another (say, latitude and longitude values) then
normalising per feature is not a good idea. For features that
are essentially independent it does make sense to get all the
features on (relatively) the same scale. The best way to do
this is to use
<a href="http://scikit-learn.org/stable/modules/preprocessing.html">pre-processing tools from scikit-learn</a>.
All the advice given there applies as sensible preprocessing
for UMAP, and since UMAP is scikit-learn compatible you
can put all of this together into a <a href="http://scikit-learn.org/stable/modules/generated/sklearn.pipeline.Pipeline.html">scikit-learn pipeline</a>.</p>
<h2 id="can-i-cluster-the-results-of-umap">Can I cluster the results of UMAP?<a class="headerlink" href="#can-i-cluster-the-results-of-umap" title="Permanent link">&para;</a></h2>
<p>This is hard to answer well, but essentially the answer is
"yes, with care". To start with it matters what clustering
algorithm you are going to use. Since UMAP does not necessarily
produce clean spherical clusters something like K-Means
is a poor choice. I would recommend
<a href="https://github.com/scikit-learn-contrib/hdbscan">HDBSCAN</a> or
similar. The catch here is that UMAP, with its uniform density
assumption, does not preserve density well. What UMAP will do,
however, is contract connected components of the manifold
together. Providing you have enough data for UMAP to
distinguish that information then you can get <em>useful</em>
clustering results out since algorithms like HDBSCAN will
easily pick out the components after applying UMAP.</p>
<p>UMAP does offer significant improvements over algorithms
like t-SNE for clustering. First, by preserving more
global structure and creating meaningful separation
between connected components of the manifold on which
the data lies, UMAP offers more meaningful clusters.
Second, because it supports arbitrary embedding
dimensions, UMAP allows embedding to larger dimensional
spaces that make it more amenable to clustering.</p>
<h2 id="the-clusters-are-all-squashed-together-and-i-cant-see-internal-structure">The clusters are all squashed together and I can't see internal structure<a class="headerlink" href="#the-clusters-are-all-squashed-together-and-i-cant-see-internal-structure" title="Permanent link">&para;</a></h2>
<p>One of UMAPs goals is to have distance between clusters of points
be meaningful. This means that clusters can end up spread out
with a fair amount of space between them. As a result the
clusters themselves can end up more visually packed together
than in, say, t-SNE. This is intended. A catch, however, is
that many plots (for example matplotlib's scatter plot with
default parameters) tend to show the clusters only as indistinct
blobs with no internal structure. The solution for this is
really a matter of tuning the plot more than anything else.</p>
<p>If you are using matplotlib consider using the <code>s</code> parameter
that specifies the glyph size in scatter plots. Depending on
how much data you have reducing this to anything from 5 to
0.001 can have a notable effect. The <code>size</code> parameter in
bokeh is similarly useful (but does not need to be quite so small).</p>
<p>More generally the real solution, particular with large datasets,
is to use <a href="http://datashader.org/">datashader</a> for plotting.
Datashader is a plotting library that handles aggregation
of large scale data in scatter plots in a way that can better
show the underlying detail that can otherwise be lost. We
highly recommend investing the time to learn datashader for
UMAP plot particularly for larger datasets.</p>
<h2 id="i-ran-out-of-memory-help">I ran out of memory. Help!<a class="headerlink" href="#i-ran-out-of-memory-help" title="Permanent link">&para;</a></h2>
<p>For some datasets the default options for approximate
nearest neighbor search can result in excessive memory use.
If your dataset is not especially large but you have found
that UMAP runs out of memory when operating on it consider
using the <code>low_memory=True</code> option, which will switch
to a slower but less memory intensive approach to computing
the approximate nearest neighbors. This may alleviate your
issues.</p>
<h2 id="umap-is-eating-all-my-cores-help">UMAP is eating all my cores. Help!<a class="headerlink" href="#umap-is-eating-all-my-cores-help" title="Permanent link">&para;</a></h2>
<p>If run without a random seed UMAP will use numba's parallel
implementation to do multithreaded work and use many cores.
By default this will make use of as many cores as are available.
If you are on a shared machine or otherwise don't wish to
use <em>all</em> the cores at once you can restrict the number of
threads that numba uses by making use of the environment
variable <code>NUMBA_NUM_THREADS</code>; see the <code>numba
documentation &lt;https://numba.pydata.org/numba-doc/dev/reference/envvars.html#threading-control&gt;</code>__
for more details.</p>
<h2 id="is-there-gpu-or-multicore-cpu-support">Is there GPU or multicore-CPU support?<a class="headerlink" href="#is-there-gpu-or-multicore-cpu-support" title="Permanent link">&para;</a></h2>
<p>There is basic multicore support as of version 0.4.
In the future it is possible that GPU support may
be added.</p>
<p>There is a UMAP implementation for GPU available in
the NVIDIA RAPIDS cuML library, so if you need GPU
support that is currently the best place to go.</p>
<h2 id="can-i-add-a-custom-loss-function">Can I add a custom loss function?<a class="headerlink" href="#can-i-add-a-custom-loss-function" title="Permanent link">&para;</a></h2>
<p>To allow for fast performance the SGD phase of UMAP has
been hand-coded for the specific needs of UMAP. This makes
custom loss functions a little difficult to handle. Now
that Numba (as of version 0.38) supports passing functions
it is possible that future versions of UMAP may support
such functionality. In the meantime you should definitely
look into <a href="https://github.com/jlmelville/smallvis">smallvis</a>,
a library for t-SNE, LargeVis, UMAP, and related algorithms.
Smallvis only works for small datasets, but provides
much greater flexibility and control.</p>
<h2 id="is-there-support-for-the-r-language">Is there support for the R language?<a class="headerlink" href="#is-there-support-for-the-r-language" title="Permanent link">&para;</a></h2>
<p>Yes! A number of people have worked hard to make UMAP
available to R users.</p>
<p>If you want to use the reference
implementation under the hood but want a nice R interface
then we recommend <a href="https://github.com/tkonopka/umap">umap</a>,
which wraps the python code with
<a href="https://rstudio.github.io/reticulate/">reticulate</a>.
Another reticulate interface is
<a href="https://github.com/ropenscilabs/umapr">umapr</a>, but it
may not be under active development.</p>
<p>If you want a pure R version then we recommend
<a href="https://github.com/jlmelville/uwot">uwot</a> at this time.
<a href="https://github.com/tkonopka/umap">umap</a> also provides
a pure R implementation in addition to its reticulate
wrapper.</p>
<p>Both umap and uwot are available on CRAN.</p>
<h2 id="is-there-a-cc-implementation">Is there a C/C++ implementation?<a class="headerlink" href="#is-there-a-cc-implementation" title="Permanent link">&para;</a></h2>
<p>Not that we are aware of. For now Numba has done a very
admirable job of providing high performance and the
developers of UMAP have not felt the need to move to
lower level languages. At some point a multithreaded
C++ implementation may be made available, but there are
no time-frames for when that would happen.</p>
<h2 id="i-cant-get-umap-to-run-properly">I can't get UMAP to run properly!<a class="headerlink" href="#i-cant-get-umap-to-run-properly" title="Permanent link">&para;</a></h2>
<p>There are, inevitably, a number of issues and corner cases
that can cause issues for UMAP. Some know issues that can
cause problems are:</p>
<ul>
<li>UMAP doesn't currently support 32-bit Windows.
  This is due to issues with Numba of that platform
  and will not likely be resolved soon. Sorry :-(</li>
<li>If you have pip installed an old package with a conflicting name
  at any time, this can cause serious issues. You will want to purge/remove
  everything umap related in your <code>site-packages</code>
  directory and re-install <code>umap</code>.</li>
<li>Having any files called <code>umap.py</code> in the current
  directory you will have issues as that will be
  loaded instead of the <code>umap</code> module.</li>
</ul>
<p>It is worth checking the
<a href="https://github.com/lmcinnes/umap/issues">issues page on github</a>
for potential solutions. If all else fails please add an
<a href="https://github.com/lmcinnes/umap/issues/new">issue on github</a>.</p>
<h2 id="what-is-the-difference-between-pca-umap-vaes">What is the difference between PCA / UMAP / VAEs?<a class="headerlink" href="#what-is-the-difference-between-pca-umap-vaes" title="Permanent link">&para;</a></h2>
<p>This is an example of an embedding for a popular Fashion MNIST dataset.</p>
<p><img alt="Comparison of PCA / UMAP / VAE embeddings" src="images/umap_vae_pca.png" />
<em>Comparison of PCA / UMAP / VAE embeddings</em></p>
<p>Note that FMNIST is mostly a toy dataset (MNIST on steroids).
On such a simplistic case UMAP shows distillation results
(i.e. if we use its embedding in a downstream task like classification)
comparable to VAEs, which are more computationally expensive.</p>
<p>By definition:</p>
<ul>
<li>PCA is linear transformation, you can apply it
  to mostly any kind of data in an unsupervised fashion.
  Also it works really fast. For most real world tasks
  its embeddings are mostly too simplistic / useless.</li>
<li>VAE is a kind of encoder-decoder neural network,
  trained with KLD loss and BCE (or MSE) loss
  to enforce the resulting embedding to be continuous.
  VAE is an extension of auto-encoder networks,
  which by design should produce embeddings that are
  not only relevant to actually encoding the data, but are
  also smooth.</li>
</ul>
<p>From a more practical standpoint:</p>
<ul>
<li>PCA mostly works for any reasonable dataset on a modern machine.
  (up to tens or hundreds of millions of rows);</li>
<li>VAEs have been shown to work only for toy datasets
  and to our knowledge there was no real life useful application to
  a real world sized dataset (i.e. ImageNet);</li>
<li>Applying UMAP to real world tasks usually provides a good starting
  point for downstream tasks (data visualization, clustering, classification)
  and works reasonably fast;</li>
<li>Consider a typical pipeline: high-dimensional embedding (300+)
  =&gt; PCA to reduce to 50 dimensions =&gt; UMAP to reduce to 10-20 dimensions
  =&gt; HDBSCAN for clustering / some plain algorithm for classification;</li>
</ul>
<p>Which tool should I use?</p>
<ul>
<li>PCA for very large or high dimensional datasets (or maybe consider finding
  a domain specific matrix factorization technique, e.g. topic modelling for texts);</li>
<li>UMAP for smaller datasets;</li>
<li>VAEs are mostly experimental;</li>
</ul>
<p>Where can I learn more?</p>
<ul>
<li>While PCA is ubiquitous, you may <a href="https://github.com/snakers4/playing_with_vae">look</a>
  at this example comparing PCA / UMAP / VAEs;</li>
</ul>
<h2 id="how-umap-can-go-wrong">How UMAP can go wrong<a class="headerlink" href="#how-umap-can-go-wrong" title="Permanent link">&para;</a></h2>
<p>One way UMAP can go wrong is the introduction of data points that are maximally far apart
from all other points in your data set.  In other words, a points nearest neighbour is maximally
far from it.  A common example of this could be a point which shares no features in common
with any other point under a Jaccard distance or a point whose nearest neighbour is np.inf from
it under a continuous distance function.  In both these cases UMAPs assumption of all points
lying on a connected manifold can lead us astray.  From this points perspective all other points
are equally valid nearest neighbours so its k-nearest neighbour query will return a random
selection of neighbours all at this maximal distance.  Next we will normalize this distance by
applying our UMAP kernel which says that a point should be maximally similar to it's nearest neighbour.
Since all k-nearest neighbours are identically far apart they will all be considered maximally
similar by our point in question.  When we try to embed our data into a low dimensional space
our optimization will attempt to pull all these randomly selected points together.  Add a
sufficiently large number of these points and our entire space gets pulled together destroying
any of the structure we had hoped to identify.</p>
<p>To circumvent this problem we've added a disconnection_distance parameter to UMAP which will cut
any edge with a distance greater than the value passed in.  This parameter defaults to <code>None</code>.
When set to <code>None</code> the disconnection_distance will be set to the maximal value for any of our
supported bounded metrics and otherwise set to np.inf.  Removing these edges from the UMAP graph
will disconnect our manifold and cause these points to start where they are initialized and get pushed
away from all other points via the our optimization.</p>
<p>If a user has a good understanding of their distance metric they can set this value by hand to prevent
data in particularly sparse regions of their space from becoming connected to their manifold.</p>
<p>If vertices in your graph are disconnected a warning message will be thrown.  At that point a user can
make use of the umap.utils.disconnected_vertices() function to identify the disconnected points.
This can be used either for filtering and retraining a new UMAP model or simple to bed used as a
filter for visualization purposes as seen below.</p>
<div class="highlight"><span class="filename">Python</span><pre><span></span><code><span class="n">umap_model</span> <span class="o">=</span> <span class="n">umap</span><span class="o">.</span><span class="n">UMAP</span><span class="p">()</span><span class="o">.</span><span class="n">fit</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
<span class="n">disconnected_points</span> <span class="o">=</span> <span class="n">umap</span><span class="o">.</span><span class="n">utils</span><span class="o">.</span><span class="n">disconnected_vertices</span><span class="p">(</span><span class="n">umap_model</span><span class="p">)</span>
<span class="n">umap</span><span class="o">.</span><span class="n">plot</span><span class="o">.</span><span class="n">points</span><span class="p">(</span><span class="n">umap_model</span><span class="p">,</span> <span class="n">subset_points</span><span class="o">=~</span><span class="n">disconnected_points</span><span class="p">)</span>
</code></pre></div>
<h2 id="successful-use-cases">Successful use-cases<a class="headerlink" href="#successful-use-cases" title="Permanent link">&para;</a></h2>
<p>UMAP can be / has been successfully applied to the following domains:</p>
<ul>
<li>Single cell data visualization in biology;</li>
<li>Mapping malware based on behavioural data;</li>
<li>Pre-processing phrase vectors for clustering;</li>
<li>Pre-processing image embeddings (Inception) for clustering;</li>
</ul>
<p>and many more -- if you have a successful use-case please submit
a pull request adding it to this list!</p>













              </article>
            </div>


<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>

          <button type="button" class="md-top md-icon" data-md-component="top" hidden>

  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8z"/></svg>
  Back to top
</button>

      </main>

        <footer class="md-footer">

  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">

    <div class="md-copyright__highlight">
      Copyright &copy; 2017-2024 Leland McInnes
    </div>


    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>

</div>

    </div>
  </div>
</footer>

    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>


    <script id="__config" type="application/json">{"base": "..", "features": ["navigation.instant", "navigation.expand", "navigation.top", "content.code.copy", "content.tooltips", "search.suggest", "search.highlight"], "search": "../assets/javascripts/workers/search.6ce7567c.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}}</script>


      <script src="../assets/javascripts/bundle.83f73b43.min.js"></script>


  </body>
</html>
