
<!doctype html>
<html lang="en" class="no-js">
  <head>

      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">

        <meta name="description" content="Uniform Manifold Approximation and Projection">


        <meta name="author" content="Leland McInnes">


        <link rel="canonical" href="https://lmcinnes.github.io/umap/plotting/">


        <link rel="prev" href="../transform_landmarked_pumap/">


        <link rel="next" href="../interactive_viz/">


      <link rel="icon" href="../doc/logo_large.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.5.46">



        <title>Plotting - UMAP</title>



      <link rel="stylesheet" href="../assets/stylesheets/main.6f8fc17f.min.css">


        <link rel="stylesheet" href="../assets/stylesheets/palette.06af60db.min.css">












        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>



    <script>__md_scope=new URL("..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>






  </head>









    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="indigo">


    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">


        <a href="#plotting-umap-results" class="md-skip">
          Skip to content
        </a>

    </div>
    <div data-md-component="announce">

    </div>






<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href=".." title="UMAP" class="md-header__button md-logo" aria-label="UMAP" data-md-component="logo">

  <img src="../doc/logo_large.png" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">

      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            UMAP
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">

              Plotting

          </span>
        </div>
      </div>
    </div>


        <form class="md-header__option" data-md-component="palette">




    <input class="md-option" data-md-color-media="" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="indigo"  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_0">

      <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_1" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a4 4 0 0 0-4 4 4 4 0 0 0 4 4 4 4 0 0 0 4-4 4 4 0 0 0-4-4m0 10a6 6 0 0 1-6-6 6 6 0 0 1 6-6 6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"/></svg>
      </label>





    <input class="md-option" data-md-color-media="" data-md-color-scheme="slate" data-md-color-primary="indigo" data-md-color-accent="indigo"  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_1">

      <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_0" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 18c-.89 0-1.74-.2-2.5-.55C11.56 16.5 13 14.42 13 12s-1.44-4.5-3.5-5.45C10.26 6.2 11.11 6 12 6a6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"/></svg>
      </label>


</form>



      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>



      <label class="md-header__button md-icon" for="__search">

        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">

        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>

        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">

        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">

          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>

        <div class="md-search__suggest" data-md-component="search-suggest"></div>

    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>


      <div class="md-header__source">
        <a href="https://github.com/lmcinnes/umap" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">

    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.7.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81"/></svg>
  </div>
  <div class="md-source__repository">
    lmcinnes/umap
  </div>
</a>
      </div>

  </nav>

</header>

    <div class="md-container" data-md-component="container">






      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">



              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">




<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href=".." title="UMAP" class="md-nav__button md-logo" aria-label="UMAP" data-md-component="logo">

  <img src="../doc/logo_large.png" alt="logo">

    </a>
    UMAP
  </label>

    <div class="md-nav__source">
      <a href="https://github.com/lmcinnes/umap" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">

    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.7.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81"/></svg>
  </div>
  <div class="md-source__repository">
    lmcinnes/umap
  </div>
</a>
    </div>

  <ul class="md-nav__list" data-md-scrollfix>







    <li class="md-nav__item">
      <a href=".." class="md-nav__link">


  <span class="md-ellipsis">
    Home
  </span>


      </a>
    </li>













    <li class="md-nav__item md-nav__item--nested">





        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_2" >


          <label class="md-nav__link" for="__nav_2" id="__nav_2_label" tabindex="0">


  <span class="md-ellipsis">
    Getting Started
  </span>


            <span class="md-nav__icon md-icon"></span>
          </label>

        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2">
            <span class="md-nav__icon md-icon"></span>
            Getting Started
          </label>
          <ul class="md-nav__list" data-md-scrollfix>







    <li class="md-nav__item">
      <a href="../basic_usage/" class="md-nav__link">


  <span class="md-ellipsis">
    Installation
  </span>


      </a>
    </li>










    <li class="md-nav__item">
      <a href="../how_umap_works/" class="md-nav__link">


  <span class="md-ellipsis">
    How UMAP Works
  </span>


      </a>
    </li>










    <li class="md-nav__item">
      <a href="../reproducibility/" class="md-nav__link">


  <span class="md-ellipsis">
    Reproducibility
  </span>


      </a>
    </li>




          </ul>
        </nav>

    </li>













    <li class="md-nav__item md-nav__item--nested">





        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_3" >


          <label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="0">


  <span class="md-ellipsis">
    User Guide
  </span>


            <span class="md-nav__icon md-icon"></span>
          </label>

        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            User Guide
          </label>
          <ul class="md-nav__list" data-md-scrollfix>







    <li class="md-nav__item">
      <a href="../basic_usage/" class="md-nav__link">


  <span class="md-ellipsis">
    Installation
  </span>


      </a>
    </li>










    <li class="md-nav__item">
      <a href="../parameters/" class="md-nav__link">


  <span class="md-ellipsis">
    Parameters
  </span>


      </a>
    </li>










    <li class="md-nav__item">
      <a href="../supervised/" class="md-nav__link">


  <span class="md-ellipsis">
    Supervised Dimensionality Reduction
  </span>


      </a>
    </li>










    <li class="md-nav__item">
      <a href="../clustering/" class="md-nav__link">


  <span class="md-ellipsis">
    Clustering
  </span>


      </a>
    </li>










    <li class="md-nav__item">
      <a href="../inverse_transform/" class="md-nav__link">


  <span class="md-ellipsis">
    Inverse Transform
  </span>


      </a>
    </li>










    <li class="md-nav__item">
      <a href="../sparse/" class="md-nav__link">


  <span class="md-ellipsis">
    Sparse Data
  </span>


      </a>
    </li>




          </ul>
        </nav>

    </li>













    <li class="md-nav__item md-nav__item--nested">





        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_4" >


          <label class="md-nav__link" for="__nav_4" id="__nav_4_label" tabindex="0">


  <span class="md-ellipsis">
    Advanced Topics
  </span>


            <span class="md-nav__icon md-icon"></span>
          </label>

        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4">
            <span class="md-nav__icon md-icon"></span>
            Advanced Topics
          </label>
          <ul class="md-nav__list" data-md-scrollfix>







    <li class="md-nav__item">
      <a href="../composing_models/" class="md-nav__link">


  <span class="md-ellipsis">
    Composing Models
  </span>


      </a>
    </li>










    <li class="md-nav__item">
      <a href="../aligned_umap_basic_usage/" class="md-nav__link">


  <span class="md-ellipsis">
    Aligned UMAP
  </span>


      </a>
    </li>










    <li class="md-nav__item">
      <a href="../aligned_umap_politics_demo/" class="md-nav__link">


  <span class="md-ellipsis">
    Aligned UMAP - Politics Demo
  </span>


      </a>
    </li>










    <li class="md-nav__item">
      <a href="../embedding_space/" class="md-nav__link">


  <span class="md-ellipsis">
    Embedding Space
  </span>


      </a>
    </li>










    <li class="md-nav__item">
      <a href="../exploratory_analysis/" class="md-nav__link">


  <span class="md-ellipsis">
    Exploratory Analysis
  </span>


      </a>
    </li>




          </ul>
        </nav>

    </li>













    <li class="md-nav__item md-nav__item--nested">





        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_5" >


          <label class="md-nav__link" for="__nav_5" id="__nav_5_label" tabindex="0">


  <span class="md-ellipsis">
    Variants and Extensions
  </span>


            <span class="md-nav__icon md-icon"></span>
          </label>

        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5">
            <span class="md-nav__icon md-icon"></span>
            Variants and Extensions
          </label>
          <ul class="md-nav__list" data-md-scrollfix>







    <li class="md-nav__item">
      <a href="../densmap_demo/" class="md-nav__link">


  <span class="md-ellipsis">
    densMAP
  </span>


      </a>
    </li>










    <li class="md-nav__item">
      <a href="../parametric_umap/" class="md-nav__link">


  <span class="md-ellipsis">
    Parametric UMAP
  </span>


      </a>
    </li>










    <li class="md-nav__item">
      <a href="../mutual_nn_umap/" class="md-nav__link">


  <span class="md-ellipsis">
    Mutual Nearest Neighbors UMAP
  </span>


      </a>
    </li>










    <li class="md-nav__item">
      <a href="../transform/" class="md-nav__link">


  <span class="md-ellipsis">
    Transform & Inference
  </span>


      </a>
    </li>










    <li class="md-nav__item">
      <a href="../transform_landmarked_pumap/" class="md-nav__link">


  <span class="md-ellipsis">
    Landmarked Parametric UMAP
  </span>


      </a>
    </li>




          </ul>
        </nav>

    </li>















    <li class="md-nav__item md-nav__item--active md-nav__item--nested">



        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6" checked>


          <label class="md-nav__link" for="__nav_6" id="__nav_6_label" tabindex="0">


  <span class="md-ellipsis">
    Visualization and Interactive
  </span>


            <span class="md-nav__icon md-icon"></span>
          </label>

        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_6_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_6">
            <span class="md-nav__icon md-icon"></span>
            Visualization and Interactive
          </label>
          <ul class="md-nav__list" data-md-scrollfix>









    <li class="md-nav__item md-nav__item--active">

      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">





        <label class="md-nav__link md-nav__link--active" for="__toc">


  <span class="md-ellipsis">
    Plotting
  </span>


          <span class="md-nav__icon md-icon"></span>
        </label>

      <a href="./" class="md-nav__link md-nav__link--active">


  <span class="md-ellipsis">
    Plotting
  </span>


      </a>



<nav class="md-nav md-nav--secondary" aria-label="Table of contents">






    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>

        <li class="md-nav__item">
  <a href="#plotting-larger-datasets" class="md-nav__link">
    <span class="md-ellipsis">
      Plotting larger datasets
    </span>
  </a>

</li>

        <li class="md-nav__item">
  <a href="#interactive-plotting-and-hover-tools" class="md-nav__link">
    <span class="md-ellipsis">
      Interactive plotting, and hover tools
    </span>
  </a>

</li>

        <li class="md-nav__item">
  <a href="#interactive-plotting-with-nomic-atlas" class="md-nav__link">
    <span class="md-ellipsis">
      Interactive plotting with Nomic Atlas
    </span>
  </a>

</li>

        <li class="md-nav__item">
  <a href="#plotting-connectivity" class="md-nav__link">
    <span class="md-ellipsis">
      Plotting connectivity
    </span>
  </a>

</li>

        <li class="md-nav__item">
  <a href="#diagnostic-plotting" class="md-nav__link">
    <span class="md-ellipsis">
      Diagnostic plotting
    </span>
  </a>

</li>

    </ul>

</nav>

    </li>










    <li class="md-nav__item">
      <a href="../interactive_viz/" class="md-nav__link">


  <span class="md-ellipsis">
    Interactive Visualization
  </span>


      </a>
    </li>










    <li class="md-nav__item">
      <a href="../outliers/" class="md-nav__link">


  <span class="md-ellipsis">
    Outlier Detection
  </span>


      </a>
    </li>










    <li class="md-nav__item">
      <a href="../document_embedding/" class="md-nav__link">


  <span class="md-ellipsis">
    Document Embedding
  </span>


      </a>
    </li>










    <li class="md-nav__item">
      <a href="../nomic_atlas_umap_of_text_embeddings/" class="md-nav__link">


  <span class="md-ellipsis">
    Nomic Atlas - Text Embeddings
  </span>


      </a>
    </li>










    <li class="md-nav__item">
      <a href="../nomic_atlas_visualizing_mnist_training_dynamics/" class="md-nav__link">


  <span class="md-ellipsis">
    Nomic Atlas - MNIST Training
  </span>


      </a>
    </li>




          </ul>
        </nav>

    </li>













    <li class="md-nav__item md-nav__item--nested">





        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_7" >


          <label class="md-nav__link" for="__nav_7" id="__nav_7_label" tabindex="0">


  <span class="md-ellipsis">
    Performance & Optimization
  </span>


            <span class="md-nav__icon md-icon"></span>
          </label>

        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_7_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_7">
            <span class="md-nav__icon md-icon"></span>
            Performance & Optimization
          </label>
          <ul class="md-nav__list" data-md-scrollfix>







    <li class="md-nav__item">
      <a href="../performance/" class="md-nav__link">


  <span class="md-ellipsis">
    Performance
  </span>


      </a>
    </li>










    <li class="md-nav__item">
      <a href="../benchmarking/" class="md-nav__link">


  <span class="md-ellipsis">
    Benchmarking
  </span>


      </a>
    </li>










    <li class="md-nav__item">
      <a href="../precomputed_k-nn/" class="md-nav__link">


  <span class="md-ellipsis">
    Precomputed k-NN
  </span>


      </a>
    </li>




          </ul>
        </nav>

    </li>













    <li class="md-nav__item md-nav__item--nested">





        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_8" >


          <label class="md-nav__link" for="__nav_8" id="__nav_8_label" tabindex="0">


  <span class="md-ellipsis">
    Reference & Support
  </span>


            <span class="md-nav__icon md-icon"></span>
          </label>

        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_8_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_8">
            <span class="md-nav__icon md-icon"></span>
            Reference & Support
          </label>
          <ul class="md-nav__list" data-md-scrollfix>







    <li class="md-nav__item">
      <a href="../api/" class="md-nav__link">


  <span class="md-ellipsis">
    API Reference
  </span>


      </a>
    </li>










    <li class="md-nav__item">
      <a href="../faq/" class="md-nav__link">


  <span class="md-ellipsis">
    FAQ
  </span>


      </a>
    </li>










    <li class="md-nav__item">
      <a href="../scientific_papers/" class="md-nav__link">


  <span class="md-ellipsis">
    Scientific Papers
  </span>


      </a>
    </li>










    <li class="md-nav__item">
      <a href="../release_notes/" class="md-nav__link">


  <span class="md-ellipsis">
    Release Notes
  </span>


      </a>
    </li>










    <li class="md-nav__item">
      <a href="../development_roadmap/" class="md-nav__link">


  <span class="md-ellipsis">
    Development Roadmap
  </span>


      </a>
    </li>




          </ul>
        </nav>

    </li>



  </ul>
</nav>
                  </div>
                </div>
              </div>



              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">


<nav class="md-nav md-nav--secondary" aria-label="Table of contents">






    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>

        <li class="md-nav__item">
  <a href="#plotting-larger-datasets" class="md-nav__link">
    <span class="md-ellipsis">
      Plotting larger datasets
    </span>
  </a>

</li>

        <li class="md-nav__item">
  <a href="#interactive-plotting-and-hover-tools" class="md-nav__link">
    <span class="md-ellipsis">
      Interactive plotting, and hover tools
    </span>
  </a>

</li>

        <li class="md-nav__item">
  <a href="#interactive-plotting-with-nomic-atlas" class="md-nav__link">
    <span class="md-ellipsis">
      Interactive plotting with Nomic Atlas
    </span>
  </a>

</li>

        <li class="md-nav__item">
  <a href="#plotting-connectivity" class="md-nav__link">
    <span class="md-ellipsis">
      Plotting connectivity
    </span>
  </a>

</li>

        <li class="md-nav__item">
  <a href="#diagnostic-plotting" class="md-nav__link">
    <span class="md-ellipsis">
      Diagnostic plotting
    </span>
  </a>

</li>

    </ul>

</nav>
                  </div>
                </div>
              </div>



            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">







<h1 id="plotting-umap-results">Plotting UMAP results<a class="headerlink" href="#plotting-umap-results" title="Permanent link">&para;</a></h1>
<p>UMAP is often used for visualization by reducing data to 2-dimensions.
Since this is such a common use case the umap package now includes
utility routines to make plotting UMAP results simple, and provide a
number of ways to view and diagnose the results. Rather than seeking to
provide a comprehensive solution that covers all possible plotting needs
this umap extension seeks to provide a simple to use interface to make
the majority of plotting needs easy, and help provide sensible plotting
choices wherever possible. To get started looking at the plotting
options let's load a variety of data to work with.</p>
<div class="highlight"><span class="filename">Python</span><pre><span></span><code><span class="kn">import</span> <span class="nn">sklearn.datasets</span>
<span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>
<span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="kn">import</span> <span class="nn">umap</span>
</code></pre></div>
<div class="highlight"><span class="filename">Python</span><pre><span></span><code><span class="n">pendigits</span> <span class="o">=</span> <span class="n">sklearn</span><span class="o">.</span><span class="n">datasets</span><span class="o">.</span><span class="n">load_digits</span><span class="p">()</span>
<span class="n">mnist</span> <span class="o">=</span> <span class="n">sklearn</span><span class="o">.</span><span class="n">datasets</span><span class="o">.</span><span class="n">fetch_openml</span><span class="p">(</span><span class="s1">&#39;mnist_784&#39;</span><span class="p">)</span>
<span class="n">fmnist</span> <span class="o">=</span> <span class="n">sklearn</span><span class="o">.</span><span class="n">datasets</span><span class="o">.</span><span class="n">fetch_openml</span><span class="p">(</span><span class="s1">&#39;Fashion-MNIST&#39;</span><span class="p">)</span>
</code></pre></div>
<p>To start we will fit a UMAP model to the pendigits data. This is as
simple as running the fit method and assigning the result to a variable.</p>
<div class="highlight"><span class="filename">Python</span><pre><span></span><code><span class="n">mapper</span> <span class="o">=</span> <span class="n">umap</span><span class="o">.</span><span class="n">UMAP</span><span class="p">()</span><span class="o">.</span><span class="n">fit</span><span class="p">(</span><span class="n">pendigits</span><span class="o">.</span><span class="n">data</span><span class="p">)</span>
</code></pre></div>
<p>If we want to do plotting we will need the <code>umap.plot</code> package. While
the umap package has a fairly small set of requirements it is worth
noting that if you want to using <code>umap.plot</code> you will need a variety
of extra libraries that are not in the default requirements for umap. In
particular you will need:</p>
<ul>
<li><a href="https://matplotlib.org/">matplotlib</a></li>
<li><a href="https://pandas.pydata.org/">pandas</a></li>
<li><a href="http://datashader.org/">datashader</a></li>
<li><a href="https://bokeh.pydata.org/en/latest/">bokeh</a></li>
<li><a href="http://holoviews.org/">holoviews</a></li>
</ul>
<p>All should be either pip or conda installable. With those in hand you
can import the <code>umap.plot</code> package.</p>
<div class="highlight"><span class="filename">Python</span><pre><span></span><code><span class="kn">import</span> <span class="nn">umap.plot</span>
</code></pre></div>
<p>Now that we have the package loaded, how do we use it? The most
straightforward thing to do is plot the umap results as points. We can
achieve this via the function <code>umap.plot.points</code>. In its most basic
form you can simply pass the trained UMAP model to <code>umap.plot.points</code>:</p>
<div class="highlight"><span class="filename">Python</span><pre><span></span><code><span class="n">umap</span><span class="o">.</span><span class="n">plot</span><span class="o">.</span><span class="n">points</span><span class="p">(</span><span class="n">mapper</span><span class="p">)</span>
</code></pre></div>
<p><img alt="Image" src="images/plotting_8_2.png" /></p>
<p>As you can see we immediately get a scatterplot of the UMAP embedding.
Note that the function automatically selects a point-size based on the
data density, and watermarks the image with the UMAP parameters that
were used (this will include the metric if it is non-standard). The
function also returns the matplotlib axes object associated to the plot,
so further matplotlib functions, such as adding titles, axis labels etc.
can be applied by the user if required.</p>
<p>It is common for data passed to UMAP to have an associated set of
labels, which may have been derived from ground-truth, from clustering,
or via other means. In such cases it is desirable to be able to color
the scatterplot according to the labelling. We can do this by simply
passing the array of label information in with the <code>labels</code> keyword.
The <code>umap.plot.points</code> function will color the data with a
categorical colormap according to the labels provided.</p>
<div class="highlight"><span class="filename">Python</span><pre><span></span><code><span class="n">umap</span><span class="o">.</span><span class="n">plot</span><span class="o">.</span><span class="n">points</span><span class="p">(</span><span class="n">mapper</span><span class="p">,</span> <span class="n">labels</span><span class="o">=</span><span class="n">pendigits</span><span class="o">.</span><span class="n">target</span><span class="p">)</span>
</code></pre></div>
<p><img alt="Image" src="images/plotting_10_1.png" /></p>
<p>Alternatively you may have extra data that is continuous rather than
categorical. In this case you will want to use a continuous colormap to
shade the data. Again this is straightforward to do -- pass in the
continuous data with the <code>values</code> keyword and data will be colored
accordingly using a continuous colormap.</p>
<p>Furthermore, if you don't like the default color choices the
<code>umap.plot.points</code> function offers a number of 'themes' that provide
predefined color choices. Themes include:</p>
<ul>
<li>fire</li>
<li>viridis</li>
<li>inferno</li>
<li>blue</li>
<li>red</li>
<li>green</li>
<li>darkblue</li>
<li>darkred</li>
<li>darkgreen</li>
</ul>
<p>Here we will make use of the 'fire' theme to demonstrate how simple it
is to change the aesthetics.</p>
<div class="highlight"><span class="filename">Python</span><pre><span></span><code><span class="n">umap</span><span class="o">.</span><span class="n">plot</span><span class="o">.</span><span class="n">points</span><span class="p">(</span><span class="n">mapper</span><span class="p">,</span> <span class="n">values</span><span class="o">=</span><span class="n">pendigits</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">mean</span><span class="p">(</span><span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">),</span> <span class="n">theme</span><span class="o">=</span><span class="s1">&#39;fire&#39;</span><span class="p">)</span>
</code></pre></div>
<p><img alt="Image" src="images/plotting_12_1.png" /></p>
<p>If you want greater control you can specify exact colormaps and
background colors. For example here we want to color the data by label,
but use a black background and use the 'Paired' colormap for the
categorical coloring (passed as <code>color_key_cmap</code>; the <code>cmap</code> keyword
defines the continuous colormap).</p>
<div class="highlight"><span class="filename">Python</span><pre><span></span><code><span class="n">umap</span><span class="o">.</span><span class="n">plot</span><span class="o">.</span><span class="n">points</span><span class="p">(</span><span class="n">mapper</span><span class="p">,</span> <span class="n">labels</span><span class="o">=</span><span class="n">pendigits</span><span class="o">.</span><span class="n">target</span><span class="p">,</span> <span class="n">color_key_cmap</span><span class="o">=</span><span class="s1">&#39;Paired&#39;</span><span class="p">,</span> <span class="n">background</span><span class="o">=</span><span class="s1">&#39;black&#39;</span><span class="p">)</span>
</code></pre></div>
<p><img alt="Image" src="images/plotting_14_1.png" /></p>
<p>Many more options are available including a <code>color_key</code> to specify a
dictionary mapping of discrete labels to colors, <code>cmap</code> to specify the
continous colormap, or the width and height of the resulting plot.
Again, this does not provide comprehensive control of the plot
aesthetics, but the goal here is to provide a simple to use interface
rather than the ability for the user to fine tune all aspects -- users
seeking such control are far better served making use of the individual
underlying packages (matplotlib, datashader, and bokeh) by themselves.</p>
<h2 id="plotting-larger-datasets">Plotting larger datasets<a class="headerlink" href="#plotting-larger-datasets" title="Permanent link">&para;</a></h2>
<p>Once you have a lot of data it becomes easier for a simple scatter plot
to lie to you. Most notably overplotting, where markers for points
overlap and pile up on top of each other, can deceive you into thinking
that extremely dense clumps may only contain a few points. While there
are things that can be done to help remedy this, such as reducing the
point size, or adding an alpha channel, few are sufficient to be sure
the plot isn't subtly lying to you in some way. <code>This essay
&lt;https://datashader.org/user_guide/Plotting_Pitfalls.html&gt;</code>_ in
the datashader documentation does an excellent job of describing the
issues with overplotting, why the obvious solutions are not quite
sufficient, and how to get around the problem. To make life easier for
users the <code>umap.plot</code> package will automatically switch to using
datashader for rendering once your dataset gets large enough. This helps
to ensure you don't get fooled by overplotting. We can see this in
action by working with one of the larger datasets such as Fashion-MNIST.</p>
<div class="highlight"><span class="filename">Python</span><pre><span></span><code><span class="n">mapper</span> <span class="o">=</span> <span class="n">umap</span><span class="o">.</span><span class="n">UMAP</span><span class="p">()</span><span class="o">.</span><span class="n">fit</span><span class="p">(</span><span class="n">fmnist</span><span class="o">.</span><span class="n">data</span><span class="p">)</span>
</code></pre></div>
<p>Having fit the data with UMAP we can call <code>umap.plot.points</code> exactly
as before, but this time, since the data is large enough to have
potential overplotting, datashader will be used in the background for
rendering.</p>
<div class="highlight"><span class="filename">Python</span><pre><span></span><code><span class="n">umap</span><span class="o">.</span><span class="n">plot</span><span class="o">.</span><span class="n">points</span><span class="p">(</span><span class="n">mapper</span><span class="p">)</span>
</code></pre></div>
<p><img alt="Image" src="images/plotting_19_2.png" /></p>
<p>All the same plot options as before hold, so we can color by labels, and
apply the same themes, and it will all seamlessly use datashader for the
actual rendering. Thus, regardless of how much data you have
<code>umap.plot.points</code> will render it well with a transparent user
interface. You, as a user, don't need to worry about switching to
plotting with datashader, or how to convert your plotting to its
slightly different API -- you can just use the same API and trust the
results you get.</p>
<div class="highlight"><span class="filename">Python</span><pre><span></span><code><span class="n">umap</span><span class="o">.</span><span class="n">plot</span><span class="o">.</span><span class="n">points</span><span class="p">(</span><span class="n">mapper</span><span class="p">,</span> <span class="n">labels</span><span class="o">=</span><span class="n">fmnist</span><span class="o">.</span><span class="n">target</span><span class="p">,</span> <span class="n">theme</span><span class="o">=</span><span class="s1">&#39;fire&#39;</span><span class="p">)</span>
</code></pre></div>
<p><img alt="Image" src="images/plotting_21_2.png" /></p>
<h2 id="interactive-plotting-and-hover-tools">Interactive plotting, and hover tools<a class="headerlink" href="#interactive-plotting-and-hover-tools" title="Permanent link">&para;</a></h2>
<p>Rendering good looking static plots is important, but what if you want
to be able to interact with your data -- pan around, and zoom in on the
clusters to see the finer structure? What if you want to annotate your
data with more complex labels than merely colors? Wouldn't it be good to
be able to hover over data points and get more information about the
individual point? Since this is a very common use case <code>umap.plot</code>
tries to make it easy to quickly generate such plots, and provide basic
utilities to allow you to have annotated hover tools working quickly.
Again, the goal is not to provide a comprehensive solution that can do
everything, but rather a simple to use and consistent API to get users
up and running fast.</p>
<p>To make a good example of this let's use a subset of the Fashion MNIST
dataset. We can quickly train a new mapper object on that.</p>
<div class="highlight"><span class="filename">Python</span><pre><span></span><code><span class="n">mapper</span> <span class="o">=</span> <span class="n">umap</span><span class="o">.</span><span class="n">UMAP</span><span class="p">()</span><span class="o">.</span><span class="n">fit</span><span class="p">(</span><span class="n">fmnist</span><span class="o">.</span><span class="n">data</span><span class="p">[:</span><span class="mi">30000</span><span class="p">])</span>
</code></pre></div>
<p>The goal is to be able to hover over different points and see data
associated with the given point (or points) under the cursor. For this
simple demonstration we'll just use the target information of the point.
To create hover information you need to construct a dataframe of all the
data you would like to appear in the hover. Each row should correspond
to a source of data points (appearing in the same order), and the columns
can provide whatever extra data you would like to display in the hover
tooltip. In this case we'll need a dataframe that can include the index
of the point, its target number, and the actual name of the type of
fashion item that target corresponds to. This is easy to quickly put
together using pandas.</p>
<div class="highlight"><span class="filename">Python</span><pre><span></span><code><span class="n">hover_data</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">({</span><span class="s1">&#39;index&#39;</span><span class="p">:</span><span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">30000</span><span class="p">),</span>
                           <span class="s1">&#39;label&#39;</span><span class="p">:</span><span class="n">fmnist</span><span class="o">.</span><span class="n">target</span><span class="p">[:</span><span class="mi">30000</span><span class="p">]})</span>
<span class="n">hover_data</span><span class="p">[</span><span class="s1">&#39;item&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">hover_data</span><span class="o">.</span><span class="n">label</span><span class="o">.</span><span class="n">map</span><span class="p">(</span>
    <span class="p">{</span>
        <span class="s1">&#39;0&#39;</span><span class="p">:</span><span class="s1">&#39;T-shirt/top&#39;</span><span class="p">,</span>
        <span class="s1">&#39;1&#39;</span><span class="p">:</span><span class="s1">&#39;Trouser&#39;</span><span class="p">,</span>
        <span class="s1">&#39;2&#39;</span><span class="p">:</span><span class="s1">&#39;Pullover&#39;</span><span class="p">,</span>
        <span class="s1">&#39;3&#39;</span><span class="p">:</span><span class="s1">&#39;Dress&#39;</span><span class="p">,</span>
        <span class="s1">&#39;4&#39;</span><span class="p">:</span><span class="s1">&#39;Coat&#39;</span><span class="p">,</span>
        <span class="s1">&#39;5&#39;</span><span class="p">:</span><span class="s1">&#39;Sandal&#39;</span><span class="p">,</span>
        <span class="s1">&#39;6&#39;</span><span class="p">:</span><span class="s1">&#39;Shirt&#39;</span><span class="p">,</span>
        <span class="s1">&#39;7&#39;</span><span class="p">:</span><span class="s1">&#39;Sneaker&#39;</span><span class="p">,</span>
        <span class="s1">&#39;8&#39;</span><span class="p">:</span><span class="s1">&#39;Bag&#39;</span><span class="p">,</span>
        <span class="s1">&#39;9&#39;</span><span class="p">:</span><span class="s1">&#39;Ankle Boot&#39;</span><span class="p">,</span>
    <span class="p">}</span>
<span class="p">)</span>
</code></pre></div>
<p>For interactive use the <code>umap.plot</code> package makes use of bokeh. Bokeh
has several output methods, but in the approach we'll be outputting
inline in a notebook. We have to enable this using the
<code>output_notebook</code> function. Alteratively we could use <code>output_file</code>
or other similar options -- see the bokeh documentation for more
details.</p>
<div class="highlight"><span class="filename">Python</span><pre><span></span><code><span class="n">umap</span><span class="o">.</span><span class="n">plot</span><span class="o">.</span><span class="n">output_notebook</span><span class="p">()</span>
</code></pre></div>
<div class="highlight"><span class="filename">Text Only</span><pre><span></span><code>&lt;div class=&quot;bk-root&quot;&gt;
    &lt;a href=&quot;https://bokeh.pydata.org&quot; target=&quot;_blank&quot; class=&quot;bk-logo bk-logo-small bk-logo-notebook&quot;&gt;&lt;/a&gt;
    &lt;span id=&quot;1001&quot;&gt;Loading BokehJS ...&lt;/span&gt;
&lt;/div&gt;
</code></pre></div>
<p>Now we can make an interactive plot using <code>umap.plot.interactive</code>.
This has a very similar API to the <code>umap.plot.points</code> approach, but
also supports a <code>hover_data</code> keyword which, if passed a suitable
dataframe, will provide hover tooltips in the interactive plot. Since
bokeh allows different outputs, to display it in the notebook we will
have to take the extra stop of calling <code>show</code> on the result.</p>
<div class="highlight"><span class="filename">Python</span><pre><span></span><code><span class="n">p</span> <span class="o">=</span> <span class="n">umap</span><span class="o">.</span><span class="n">plot</span><span class="o">.</span><span class="n">interactive</span><span class="p">(</span><span class="n">mapper</span><span class="p">,</span> <span class="n">labels</span><span class="o">=</span><span class="n">fmnist</span><span class="o">.</span><span class="n">target</span><span class="p">[:</span><span class="mi">30000</span><span class="p">],</span> <span class="n">hover_data</span><span class="o">=</span><span class="n">hover_data</span><span class="p">,</span> <span class="n">point_size</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>
<span class="n">umap</span><span class="o">.</span><span class="n">plot</span><span class="o">.</span><span class="n">show</span><span class="p">(</span><span class="n">p</span><span class="p">)</span>
</code></pre></div>
<p><a href="plotting_interactive_example.html">View html file</a></p>
<p>We get the sort of result one would like -- a fully interactive plot
that can be zoomed in on, and more, but we also now have an interactive
hover tool which presents the data from the dataframe we constructed.
This allows a quick and easy method to get up and running with a richer
interactive exploration of your UMAP plot. <code>umap.plot.interactive</code>
supports all the same aesthetic parameters as <code>umap.plot.points</code> so
you can theme your plot, color by label or value, and other similar
operations explained above for <code>umap.plot.points</code>.</p>
<h2 id="interactive-plotting-with-nomic-atlas">Interactive plotting with Nomic Atlas<a class="headerlink" href="#interactive-plotting-with-nomic-atlas" title="Permanent link">&para;</a></h2>
<p>For interactive exploration, especially with large datasets, you can use <a href="https://atlas.nomic.ai/">Nomic Atlas</a>. Nomic Atlas is a platform for embedding generation, visualization, analysis, retrieval, and everything you need to operationalize your embeddings and make them useful for your applications. It directly integrates UMAP as one of its projection models, allowing you to leverage UMAP within a powerful visualization environment.</p>
<p>Nomic Atlas handles the embedding and UMAP dimensionality reduction process and provides an interactive interface with features like searching, filtering, coloring by metadata, and displaying rich information on hover. Atlas can help when you want to share your understanding of your UMAP visualizations or collaborate with others, as the map is accessible via a URL.</p>
<p><img src="https://assets.nomicatlas.com/mnist-training-embeddings-umap-short.gif" width="600" alt="MNIST UMAP visualization in Nomic Atlas"></p>
<h2 id="plotting-connectivity">Plotting connectivity<a class="headerlink" href="#plotting-connectivity" title="Permanent link">&para;</a></h2>
<p>UMAP works by constructing an intermediate topological representation of
the approximate manifold the data may have been sampled from. In
practice this structure can be simplified down to a weighted graph.
Sometimes it can be beneficial to see how that graph (representing
connectivity in the manifold) looks with respect to the resulting
embedding. It can be used to better understand the embedding, and for
diagnostic purposes. To see the connectivity you can use the
<code>umap.plot.connectivity</code> function. It works very similarly to the
<code>umap.plot.points</code> function, and has the option as to whether to
display the embedding point, or just the connectivity. To start let's do
a simple plot showing the points:</p>
<div class="highlight"><span class="filename">Python</span><pre><span></span><code><span class="n">umap</span><span class="o">.</span><span class="n">plot</span><span class="o">.</span><span class="n">connectivity</span><span class="p">(</span><span class="n">mapper</span><span class="p">,</span> <span class="n">show_points</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</code></pre></div>
<p><img alt="Image" src="images/plotting_32_2.png" /></p>
<p>As with <code>umap.plot.points</code> there are options to control the basic
aesthetics, including theme options and an <code>edge_cmap</code> keyword
argument to specify the colormap used for displaying the edges.</p>
<p>Since this approach already leverages datashader for edge plotting, we
can go a step further and make use of the edge-bundling options
available in datashader. This can provide a less busy view of
connectivity, but can be expensive to compute, particularly for larger
datasets.</p>
<div class="highlight"><span class="filename">Python</span><pre><span></span><code><span class="n">umap</span><span class="o">.</span><span class="n">plot</span><span class="o">.</span><span class="n">connectivity</span><span class="p">(</span><span class="n">mapper</span><span class="p">,</span> <span class="n">edge_bundling</span><span class="o">=</span><span class="s1">&#39;hammer&#39;</span><span class="p">)</span>
</code></pre></div>
<p><img alt="Image" src="images/plotting_34_2.png" /></p>
<h2 id="diagnostic-plotting">Diagnostic plotting<a class="headerlink" href="#diagnostic-plotting" title="Permanent link">&para;</a></h2>
<p>Plotting the connectivity provides at least one basic diagnostic view
that helps a user understand what is going on with an embedding. More
views on data are better, of course, so <code>umap.plot</code> includes a
<code>umap.plot.diagnostic</code> function that can provide various diagnostic
plots. We'll look at a few of them here. To do so we'll use the full
MNIST digits data set.</p>
<div class="highlight"><span class="filename">Python</span><pre><span></span><code><span class="n">mapper</span> <span class="o">=</span> <span class="n">umap</span><span class="o">.</span><span class="n">UMAP</span><span class="p">()</span><span class="o">.</span><span class="n">fit</span><span class="p">(</span><span class="n">mnist</span><span class="o">.</span><span class="n">data</span><span class="p">)</span>
</code></pre></div>
<p>The first diagnostic type is a Principal Components Analysis based
diagnostic, which you can select with <code>diagnostic_type='pca'</code>. The
essence of the approach is that we can use PCA, which preserves global
structure, to reduce the data to three dimensions. If we scale the
results to fit in a 3D cube we can convert the 3D PCA coordinates of
each point into an RGB description of a color. By then coloring the
points in the UMAP embedding with the colors induced by the PCA it is
possible to get a sense of how some of the more large scale global
structure has been represented in the embedding.</p>
<div class="highlight"><span class="filename">Python</span><pre><span></span><code><span class="n">umap</span><span class="o">.</span><span class="n">plot</span><span class="o">.</span><span class="n">diagnostic</span><span class="p">(</span><span class="n">mapper</span><span class="p">,</span> <span class="n">diagnostic_type</span><span class="o">=</span><span class="s1">&#39;pca&#39;</span><span class="p">)</span>
</code></pre></div>
<p><img alt="Image" src="images/plotting_38_1.png" /></p>
<p>What we are looking for here is a generally smooth transition of colors,
and an overall layout that broadly respects the color transitions. In
this case the far left has a bottom cluster that transitions from dark
green at the bottom to blue at the top, and this matches well with the
cluster in the upper right which have a similar shade of blue at the
bottom before transitioning to more cyan and blue. In contast in the
right of the plot the lower cluster runs from purplish pink to green
from top to bottom, while the cluster above it has its bottom edge more
purple than green, suggesting that perhaps one or the other of these
clusters has been flipped vertically during the optimization process,
and this was never quite corrected.</p>
<p>An alternative, but similar, approach is to use vector quantization as
the method to generate a 3D embedding to generate colors. Vector
quantization effectively finds 3 representative centers for the data,
and then describes each data point in terms of its distance to these
centers. Clearly this, again, captures a lot of the broad global
structure of the data.</p>
<div class="highlight"><span class="filename">Python</span><pre><span></span><code><span class="n">umap</span><span class="o">.</span><span class="n">plot</span><span class="o">.</span><span class="n">diagnostic</span><span class="p">(</span><span class="n">mapper</span><span class="p">,</span> <span class="n">diagnostic_type</span><span class="o">=</span><span class="s1">&#39;vq&#39;</span><span class="p">)</span>
</code></pre></div>
<p><img alt="Image" src="images/plotting_40_1.png" /></p>
<p>Again we are looking for largely smooth transitions, and for related
colors to match up between clusters. This view supports the fact that
the left hand side of the embedding has worked well, but looking at the
right hand side it seems clear that it is the upper two of the clusters
that has been inadvertently flipped vertically. By contrasting views
like this one can get a better sense of how well the embedding is
working.</p>
<p>For a different perspective we can look at approximations of the local
dimension around each data point. Ideally the local dimension should
match the embedding dimension (although this is often a lot to hope for.
In practice when the local dimension is high this represents points (or
areas of the space) that UMAP will have a harder time embedding as well.
Thus one can trust the embedding to be more accurate in regions where
the points have consistently lower local dimension.</p>
<div class="highlight"><span class="filename">Python</span><pre><span></span><code><span class="n">local_dims</span> <span class="o">=</span> <span class="n">umap</span><span class="o">.</span><span class="n">plot</span><span class="o">.</span><span class="n">diagnostic</span><span class="p">(</span><span class="n">mapper</span><span class="p">,</span> <span class="n">diagnostic_type</span><span class="o">=</span><span class="s1">&#39;local_dim&#39;</span><span class="p">)</span>
</code></pre></div>
<p><img alt="Image" src="images/plotting_42_0.png" /></p>
<p>As you can see, the local dimension of the data varies quite widely across
the data. In particular the lower left cluster has the lowest local
dimension -- this is actually unsurprising as this is the cluster
corresponding to the digits 1: there are relatively few degrees of
freedom over how a person draws a number one, and so the resulting local
dimension is lower. In contrast the clusters in the middle have a much
higher local dimension. We should expect the embedidng to be a little
less accurate in these regions: it is hard to represent seven
dimensional data well in only two dimensions, and compromises will need
to be made.</p>
<p>The final diagnostic we'll look at is how well local neighborhoods are
preserved. We can measure this in terms of the Jaccard index of the
local neighborhood in the high dimensional space compared to the
equivalent neighborhood in the embedding. The Jaccard index is
essentially the ratio of the number of neighbors that the two
neighborhoods have in common over the total number of unique neighbors
across the two neighborhoods. Higher values mean that the local
neighborhood has been more accurately preserved.</p>
<div class="highlight"><span class="filename">Python</span><pre><span></span><code><span class="n">umap</span><span class="o">.</span><span class="n">plot</span><span class="o">.</span><span class="n">diagnostic</span><span class="p">(</span><span class="n">mapper</span><span class="p">,</span> <span class="n">diagnostic_type</span><span class="o">=</span><span class="s1">&#39;neighborhood&#39;</span><span class="p">)</span>
</code></pre></div>
<p><img alt="Image" src="images/plotting_44_1.png" /></p>
<p>As one might expect the local neighborhood preservation tends to be a
lot better for those points that had a lower local dimension (as seen in
the last plot). There is also a tendency for the edges of clusters
(where there were clear boundaries to be followed) to have a better
preservation of neighborhoods than the centers of the clusters that had
higher local dimension. Again, this provides a view on which areas of
the embedding you can have greater trust in, and which regions had to
make compromises to embed into two dimensions.</p>













              </article>
            </div>


<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>

          <button type="button" class="md-top md-icon" data-md-component="top" hidden>

  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8z"/></svg>
  Back to top
</button>

      </main>

        <footer class="md-footer">

  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">

    <div class="md-copyright__highlight">
      Copyright &copy; 2017-2024 Leland McInnes
    </div>


    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>

</div>

    </div>
  </div>
</footer>

    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>


    <script id="__config" type="application/json">{"base": "..", "features": ["navigation.instant", "navigation.expand", "navigation.top", "content.code.copy", "content.tooltips", "search.suggest", "search.highlight"], "search": "../assets/javascripts/workers/search.6ce7567c.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}}</script>


      <script src="../assets/javascripts/bundle.83f73b43.min.js"></script>


  </body>
</html>
